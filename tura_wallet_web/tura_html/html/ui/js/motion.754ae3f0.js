(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["motion"],{"0329":function(t){t.exports=JSON.parse('{"abi":[{"inputs":[{"internalType":"address","name":"_director","type":"address"}],"name":"addDirector","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_director","type":"address"}],"name":"delDirector","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_pid","type":"uint256"}],"name":"getVoted","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IERC20","name":"_votorToken","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"_pid","type":"uint256"},{"indexed":false,"internalType":"uint8","name":"Option","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"account","type":"uint256"}],"name":"GetVotor","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"string","name":"_AOptions","type":"string"},{"internalType":"string","name":"_BOptions","type":"string"},{"internalType":"string","name":"_COptions","type":"string"},{"internalType":"string","name":"_DOptions","type":"string"},{"internalType":"string","name":"_FOptions","type":"string"},{"internalType":"bool","name":"_isMajorProposal","type":"bool"},{"internalType":"uint256","name":"_endDay","type":"uint256"}],"name":"proposal","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_pid","type":"uint256"},{"internalType":"bool","name":"isMandatorySettlement","type":"bool"}],"name":"proposaleCalculation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"chairpersonUser","type":"address"},{"indexed":false,"internalType":"string","name":"_name","type":"string"},{"indexed":false,"internalType":"string","name":"_AOptions","type":"string"},{"indexed":false,"internalType":"string","name":"_BOptions","type":"string"},{"indexed":false,"internalType":"string","name":"_COptions","type":"string"},{"indexed":false,"internalType":"string","name":"_DOptions","type":"string"},{"indexed":false,"internalType":"string","name":"_FOptions","type":"string"},{"indexed":false,"internalType":"bool","name":"_isMajorProposal","type":"bool"}],"name":"ProposalEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_pid","type":"uint256"},{"indexed":false,"internalType":"address","name":"msgsender","type":"address"}],"name":"ProposalStop","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_pid","type":"uint256"},{"indexed":false,"internalType":"bool","name":"isMandatorySettlement","type":"bool"},{"indexed":false,"internalType":"address","name":"msgsender","type":"address"}],"name":"ProposaleCalculation","type":"event"},{"inputs":[{"internalType":"uint256","name":"_pid","type":"uint256"}],"name":"proposalStop","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"number","type":"uint256"}],"name":"setProposalValue","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_pid","type":"uint256"},{"internalType":"uint8","name":"_options","type":"uint8"},{"internalType":"uint256","name":"_votes","type":"uint256"}],"name":"vote","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"_pid","type":"uint256"},{"indexed":false,"internalType":"uint8","name":"Option","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"_votes","type":"uint256"}],"name":"VoteEvent","type":"event"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"chairpersonMap","outputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"lastProposalBlockNumber","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"directors","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getProposalLen","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"endblock","type":"uint256"}],"name":"IsProposalEnd","outputs":[{"internalType":"bool","name":"isEnd","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint8","name":"","type":"uint8"}],"name":"ProposalOptions","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"Proposals","outputs":[{"internalType":"bool","name":"IsMajorProposal","type":"bool"},{"internalType":"address","name":"Chairperson","type":"address"},{"internalType":"string","name":"Name","type":"string"},{"internalType":"uint256","name":"OptionsTotalCounts","type":"uint256"},{"internalType":"bool","name":"IsEffective","type":"bool"},{"internalType":"bool","name":"IsVotingEnd","type":"bool"},{"internalType":"uint256","name":"StartTime","type":"uint256"},{"internalType":"uint256","name":"EndTime","type":"uint256"},{"internalType":"uint8","name":"WinOption","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint8","name":"","type":"uint8"}],"name":"ProposalsOptionsCounts","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"proposalValue","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"userForProposalOptionAndCounts","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"votorMap","outputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"voteCountTotal","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"votorOptionAndCounts","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]}')},"151c":function(t,e,n){},2553:function(t,e,n){},3809:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"motion-wrap"},[n("div",{staticClass:"text-btn"},[n("ul",{staticClass:"navs"},t._l(t.navs,(function(e,a){return n("li",{key:a,on:{click:function(e){return t.addClass(a)}}},[n("router-link",{class:{actived:a==t.currentIndex},attrs:{to:e.to,tag:"span"}},[t._v(" "+t._s(e.label)+" ")])],1)})),0)]),t._m(0),n("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"25px"}},[n("Button",{staticStyle:{"margin-left":"auto"},attrs:{type:"info",disabled:t.disabled},on:{click:t.handlerPostMotion}},[t._v(" Announce a proposal ")])],1),n("div",{staticClass:"motion-list"},[n("h3"),n("div",{staticClass:"box"},[t.motionListData.length?n("ul",t._l(t.motionListData,(function(e,a){return n("li",{key:a,on:{click:function(n){return t.handlerVote(e.pid,e.OptionsTotalCounts,e.name,e.status,e.add,e.stime,e.etime,e.big,e.win)}}},[n("span",[t._v(t._s(e.name.split("|")[0]))]),n("span",[n("span",{staticClass:"vote",staticStyle:{"margin-left":"10px","font-size":"16px"}},[t._v(" "+t._s(e.big?"Major":"General")+" ")])])])})),0):n("ul",{staticClass:"nodata"},[n("li",{staticStyle:{"font-weight":"600","font-size":"16px"}},[t._v(" No proposal. Go to announce a proposal! ")])])])])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"introduce-wrap"},[n("h3",[t._v("DAO Governance")]),n("p",[t._v(" LEC Token represents the vote share of DAO governance. You can vote for a proposal by yourself or assign the vote share to a third-party person' ")])])}],o=n("1da1"),s=n("5530"),r=(n("68ef"),n("e3b3"),n("543e")),l=(n("66b9"),n("b650")),p=(n("96cf"),n("d81d"),n("5cfb"),n("2f62")),c=n("fa7d"),u=n("12b8"),d=(n("65e0"),n("99e5")),m=n("0329"),y={components:{Button:l["a"],Loading:r["a"]},data:function(){return{loading:!0,disabled:!0,dialogVisible:!1,form:{name:"",options:[{option:""}]},radio:"1",time:"",motionListData:[],vote:this.$contractAddress.vote,iecConst:"",navs:[{label:"Proposal",to:"/homeMobile/motion"},{label:"Receive",to:"/homeMobile/receive"},{label:"Donations & airdrops",to:"/homeMobile/airdrop"}],currentIndex:0}},computed:Object(s["a"])({},Object(p["c"])("login",["walletaccount"])),watch:{walletaccount:{handler:function(t){""!=t&&(this.disabled=!1)}},deep:!0,immediate:!0},created:function(){this.getcurrentIndex()?this.currentIndex=this.getcurrentIndex():this.currentIndex=0},activated:function(){this.disabled=!Object(c["c"])("walletaccount"),this.getvoteList()},methods:{getvoteList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.connectMetaMask(),Object(c["c"])("walletaccount")?t.web3=t.$web3js.getWeb3():t.web3=new d("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),t.myaddress=Object(c["c"])("walletaccount")?Object(c["c"])("walletaccount"):"0xE91d5D70b07071f85568c15ABfEda2B3466A2705",t.iecConst=new t.web3.eth.Contract(m.abi,t.vote,{from:t.myaddress}),e.next=6,t.iecConst.methods.getProposalLen().call();case 6:if(n=e.sent,a=[],!n){e.next=22;break}i=n-1;case 10:if(!(i>=0)){e.next=20;break}return e.next=13,t.iecConst.methods.Proposals(i).call();case 13:o=e.sent,o.pid=i,a.push(o),t.motionListData=a.map((function(t,e){return{pid:t.pid,name:t.Name,status:t.IsEffective,OptionsTotalCounts:t.OptionsTotalCounts,IsVotingEnd:t.IsVotingEnd,add:t.Chairperson,stime:t.StartTime,etime:t.EndTime,big:t.IsMajorProposal,win:t.WinOption}}));case 17:i--,e.next=10;break;case 20:e.next=23;break;case 22:t.motionListData=[];case 23:t.loading=!1;case 24:case"end":return e.stop()}}),e)})))()},handlerVote:function(t,e,n,a,i,o,s,r,l){this.$router.push({path:"/homeMobile/vote",query:{pid:t,optioncount:e,name:n,status:a,add:i,stime:o,etime:s,big:r,win:l}})},handlerPostMotion:function(){this.$router.push({path:"/homeMobile/postMotion"})},addClass:function(t){this.currentIndex=t,this.setcurrentIndex()},setcurrentIndex:function(){localStorage.setItem("currentIndex",this.currentIndex)},getcurrentIndex:function(){var t=localStorage.getItem("currentIndex");return this.currentIndex=t,this.currentIndex},connectMetaMask:function(){u["a"].connectMetaMask().then((function(t){Object(c["c"])("walletaccount")}))}}},f=y,b=(n("5c6c6"),n("2877")),h=Object(b["a"])(f,a,i,!1,null,"310f410b",null);e["default"]=h.exports},4477:function(t,e,n){"use strict";n("2553")},"5c6c6":function(t,e,n){"use strict";n("151c")},"66b9":function(t,e,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("e3b3"),n("bc1b")},a434:function(t,e,n){"use strict";var a=n("23e7"),i=n("23cb"),o=n("a691"),s=n("50c4"),r=n("7b0b"),l=n("65f0"),p=n("8418"),c=n("1dde"),u=c("splice"),d=Math.max,m=Math.min,y=9007199254740991,f="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var n,a,c,u,b,h,v=r(this),g=s(v.length),w=i(t,g),x=arguments.length;if(0===x?n=a=0:1===x?(n=0,a=g-w):(n=x-2,a=m(d(o(e),0),g-w)),g+n-a>y)throw TypeError(f);for(c=l(v,a),u=0;u<a;u++)b=w+u,b in v&&p(c,u,v[b]);if(c.length=a,n<a){for(u=w;u<g-a;u++)b=u+a,h=u+n,b in v?v[h]=v[b]:delete v[h];for(u=g;u>g-a+n;u--)delete v[u-1]}else if(n>a)for(u=g-a;u>w;u--)b=u+a-1,h=u+n-1,b in v?v[h]=v[b]:delete v[h];for(u=0;u<n;u++)v[u+w]=arguments[u+2];return v.length=g-a+n,c}})},cac9:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vote-wrap"},[n("div",{staticClass:"postMotion"},[n("el-button",{attrs:{type:"primary",disabled:t.disabled},on:{click:t.handlerPostMotion}},[t._v(" Announce a proposal ")])],1),t._m(0),n("div",{staticClass:"motion-list motionstyle"},[n("h3",[t._v("Proposal")]),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box"},[t.motionListData.length?n("ul",t._l(t.motionListData,(function(e,a){return n("li",{key:a,on:{click:function(n){return t.handlerVote(e.pid,e.OptionsTotalCounts,e.name,e.status,e.add,e.stime,e.etime,e.big,e.win)}}},[n("span",[t._v(t._s(e.name.split("|")[0]))]),n("span",[n("span",{staticClass:"vote",staticStyle:{"margin-right":"10px"}},[t._v(" "+t._s(e.big?"Major proposal":"General Proposal")+" ")])])])})),0):n("ul",{staticClass:"nodata"},[n("li",{staticStyle:{"font-weight":"600","font-size":"16px"}},[t._v(" No proposal. Go to announce a proposal ")])])])]),t._m(1),n("el-dialog",{attrs:{title:"Proposal configuration",visible:t.dialogVisible,"close-on-click-modal":!1,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.tabClick}},[n("el-tab-pane",{attrs:{label:"Proposals for major issues"}},[n("div",{staticStyle:{margin:"0 0 10px 18px"}},[n("h3",[t._v("Voting on major issues (MORE THAN HALF NUMBER WINS).")]),n("p",{staticStyle:{margin:"5px 0"}},[t._v(" 1. Formulate and amend the Basic Law, formulate rules for proposal,decision-making and supervision, etc. ")]),n("p",[t._v("2. Election of global representatives.")]),n("p",{staticStyle:{margin:"5px 0"}},[t._v(" 3. Formulation of specific content rules./p> ")]),n("p",[t._v("4. The vote option will be included.")])]),n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"Proposal Name:"}},[n("el-input",{attrs:{placeholder:"Please input the Proposal Name",maxlength:"“45"},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}})],1),n("el-form-item",{attrs:{label:"ERC20 Address"}},[n("el-input",{attrs:{placeholder:"Please input the ERC20 address",maxlength:"“45"},model:{value:t.newErcAdd,callback:function(e){t.newErcAdd=e},expression:"newErcAdd"}})],1),n("el-form-item",{attrs:{label:"Proposal Info:"}},[n("el-input",{attrs:{maxlength:"“45",type:"textarea",rows:3,placeholder:"Please input the proposal introduction, related links, and public welfare project contact person"},model:{value:t.newInfo,callback:function(e){t.newInfo=e},expression:"newInfo"}})],1),n("el-form-item",{attrs:{label:"Valid Time:"}},[n("el-input",{attrs:{type:"number",placeholder:"Please input the Valid Time"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),n("el-form-item",{attrs:{label:"Proposal Option:"}},t._l(t.form.options,(function(e,a){return n("div",{key:a},[n("el-input",{attrs:{width:"500px",placeholder:"Please input the Proposal Option",maxlength:"“50”"},model:{value:e.option,callback:function(n){t.$set(e,"option",n)},expression:"item.option"}}),a>=0?n("el-tooltip",{attrs:{content:"Add an option",placement:"bottom",effect:"dark"}},[n("span",{staticClass:"button button-action button-rounded button-small",staticStyle:{margin:"0 10px"},on:{click:t.addSearchOptions}},[n("i",{staticClass:"fa fa-plus"})])]):t._e(),a>=1?n("el-tooltip",{attrs:{content:"Delete an option",placement:"bottom",effect:"dark"}},[n("span",{staticClass:"button button-caution button-rounded button-small",on:{click:function(e){return t.delSearchOptions(a)}}},[n("i",{staticClass:"fa fa-minus"})])]):t._e()],1)})),0)],1),n("span",{staticStyle:{"margin-left":"20px"}},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Cancel")]),n("el-button",{attrs:{type:"primary"},on:{click:t.dialogConfirm}},[t._v("Confirm")])],1)],1),n("el-tab-pane",{attrs:{label:"General Proposal"}},[n("div",{staticStyle:{margin:"0 0 10px 18px"}},[n("h3",[t._v(" Voting on general proposal (the winner with the first number of votes). ")]),n("p",{staticStyle:{margin:"5px 0"}},[t._v(" 1. Charity to which you donate each month. ")]),n("p",[t._v("2. The Use of Treasury Fund (Celebrity Award).")]),n("p",{staticStyle:{margin:"5px 0"}},[t._v(" 3. Election of regional public opinion representatives (Regional representative: responsible for collecting and verifying humanitarian aid projects around the world) . ")]),n("p",[t._v("4. The vote option will be included.")])]),n("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"Proposal Name:"}},[n("el-input",{attrs:{placeholder:"Please input the Proposal Name",maxlength:"“45"},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}})],1),n("el-form-item",{attrs:{label:"ERC20 address"}},[n("el-input",{attrs:{placeholder:"Please input the ERC20 address",maxlength:"“45"},model:{value:t.newErcAdd,callback:function(e){t.newErcAdd=e},expression:"newErcAdd"}})],1),n("el-form-item",{attrs:{label:"Proposal Info:"}},[n("el-input",{attrs:{maxlength:"“45",type:"textarea",rows:3,placeholder:"Please input the proposal introduction, related links, and public welfare project contact person"},model:{value:t.newInfo,callback:function(e){t.newInfo=e},expression:"newInfo"}})],1),n("el-form-item",{attrs:{label:"Valid Time:"}},[n("el-input",{attrs:{type:"number",placeholder:"Please input the Valid Time"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),n("el-form-item",{attrs:{label:"Proposal Option:"}},t._l(t.form.options,(function(e,a){return n("div",{key:a,staticClass:"optionbox"},[n("el-input",{attrs:{width:"500px",placeholder:"Please input the Proposal Option",maxlength:"“50”"},model:{value:e.option,callback:function(n){t.$set(e,"option",n)},expression:"item.option"}}),a>=0?n("el-tooltip",{attrs:{content:"Add an option",placement:"bottom",effect:"dark"}},[n("span",{staticClass:"button button-action button-rounded button-small",staticStyle:{margin:"0 10px"},on:{click:t.addSearchOptions}},[n("i",{staticClass:"fa fa-plus"})])]):t._e(),a>=1?n("el-tooltip",{attrs:{content:"Delete an option",placement:"bottom",effect:"dark"}},[n("span",{staticClass:"button button-caution button-rounded button-small",on:{click:function(e){return t.delSearchOptions(a)}}},[n("i",{staticClass:"fa fa-minus"})])]):t._e()],1)})),0)],1),n("span",{staticStyle:{"margin-left":"20px"}},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("Cancel")]),n("el-button",{attrs:{type:"primary"},on:{click:t.dialogConfirm}},[t._v("Confirm")])],1)],1)],1)],1)],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"introduce-wrap"},[n("h3",[t._v("DAO Governance")]),n("p",[t._v(" LEC Token represents the vote share of DAO governance. You can vote for a proposal by yourself or assign the vote share to a third-party person' ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"motion-list"},[n("h3",[t._v("Tips:")]),n("div",{staticClass:"box",staticStyle:{"margin-left":"45px","font-size":"15px"}},[n("h2",[t._v("How to connect my wallet and propose a vote?")]),n("h2",{staticStyle:{"margin-bottom":"10px"}},[t._v(" To propose a poll, a wallet must be connected ")]),n("p",[t._v("1. Open your wallet App")]),n("p",[t._v('2. Click "Browser" or "Search DApp"')]),n("p",[t._v('3. Input "https://vote4loveearth.com" to visit the vote page')]),n("p",[t._v("4. Click “Connect Wallet")])])])}],o=n("1da1"),s=n("5530"),r=(n("96cf"),n("d81d"),n("b0c0"),n("a434"),n("2f62")),l=n("fa7d"),p=n("12b8"),c=(n("65e0"),n("99e5")),u=n("0329"),d={name:"motion",data:function(){return{loading:!0,disabled:!0,dialogVisible:!1,newName:"",newErcAdd:"",newInfo:"",form:{name:"",options:[{option:""}]},radio:1,time:"",motionListData:[],vote:this.$contractAddress.vote,iecConst:""}},computed:Object(s["a"])({},Object(r["c"])("login",["walletaccount"])),watch:{walletaccount:{handler:function(t){""!=t&&(this.disabled=!1)}},deep:!0,immediate:!0},activated:function(){this.disabled=!Object(l["c"])("walletaccount"),this.getvoteList()},methods:{tabClick:function(t){"Proposals for major issues"===t.label?this.radio=1:this.radio=2,this.resetOptions()},getvoteList:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.connectMetaMask(),Object(l["c"])("walletaccount")?t.web3=t.$web3js.getWeb3():t.web3=new c("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),t.myaddress=Object(l["c"])("walletaccount")?Object(l["c"])("walletaccount"):"0xE91d5D70b07071f85568c15ABfEda2B3466A2705",t.iecConst=new t.web3.eth.Contract(u.abi,t.vote,{from:t.myaddress}),e.next=6,t.iecConst.methods.getProposalLen().call();case 6:if(n=e.sent,a=[],!n){e.next=22;break}i=n-1;case 10:if(!(i>=0)){e.next=20;break}return e.next=13,t.iecConst.methods.Proposals(i).call();case 13:o=e.sent,o.pid=i,a.push(o),t.motionListData=a.map((function(t,e){return{pid:t.pid,name:t.Name,status:t.IsEffective,OptionsTotalCounts:t.OptionsTotalCounts,IsVotingEnd:t.IsVotingEnd,add:t.Chairperson,stime:t.StartTime,etime:t.EndTime,big:t.IsMajorProposal,win:t.WinOption}}));case 17:i--,e.next=10;break;case 20:e.next=23;break;case 22:t.motionListData=[];case 23:t.loading=!1;case 24:case"end":return e.stop()}}),e)})))()},handlerPostMotion:function(){this.dialogVisible=!0,this.resetOptions()},handlerVote:function(t,e,n,a,i,o,s,r,l){this.$router.push({path:"/home/vote",query:{pid:t,optioncount:e,name:n,status:a,add:i,stime:o,etime:s,big:r,win:l}})},dialogConfirm:function(){this.time>30?this.$message({message:"The valid time of a proposal can not exceed 30 days",type:"warning"}):this.time<1?this.$message({message:"The valid time of a proposal can not be less than 1 day",type:"warning"}):(this.form.name=this.newName+"|"+this.newErcAdd+"|"+this.newInfo,this.writeMotion())},writeMotion:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,a,i,o,s,r,p,d,m,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.connectMetaMask(),Object(l["c"])("walletaccount")?t.web3=t.$web3js.getWeb3():t.web3=new c("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),t.myaddress=Object(l["c"])("walletaccount"),t.iecConst=new t.web3.eth.Contract(u.abi,t.vote,{from:t.myaddress}),n=t.form.name=t.newName+"|"+t.newErcAdd+"|"+t.newInfo,a=t.time,i=1==t.radio,d="",1==t.form.options.length?(o=t.form.options[0].option,s="NO",r="NO",p="NO",d="Reject all options"):2==t.form.options.length?(o=t.form.options[0].option,s=t.form.options[1].option,r="NO",p="NO",d="Reject all options"):3==t.form.options.length?(o=t.form.options[0].option,s=t.form.options[1].option,r=t.form.options[2].option,p="NO",d="Reject all options"):4==t.form.options.length&&(o=t.form.options[0].option,s=t.form.options[1].option,r=t.form.options[2].option,p=t.form.options[3].option,d="Reject all options"),m=t,m.iecConst.methods.proposal(n,o,s,r,p,d,i,a).send().on("transactionHash",(function(t){m.hash=t,y=m.$message({duration:0,message:"In transaction, please wait patiently"})})).on("receipt",(function(t){t.transactionHash==m.hash&&(y.close(),m.$message({message:"提案成功",type:"success"}),m.motionListData=[],m.resetOptions(),m.dialogVisible=!1,m.getvoteList())})).on("error",(function(t,e){y.close(),m.$message({message:"Proposal failed, please try again later",type:"warning"})}));case 11:case"end":return e.stop()}}),e)})))()},addSearchOptions:function(){this.form.options.length<4?this.form.options.push({option:""}):this.$message({message:"No more than four options of a proposal",type:"warning"})},delSearchOptions:function(t){this.form.options.splice(t,1)},resetOptions:function(){this.newName="",this.newErcAdd="",this.newInfo="";var t={name:"",options:[{option:""}]};this.form=JSON.parse(JSON.stringify(t))},connectMetaMask:function(){p["a"].connectMetaMask().then((function(t){Object(l["c"])("walletaccount")}))}}},m=d,y=(n("4477"),n("2877")),f=Object(y["a"])(m,a,i,!1,null,"dee336ec",null);e["default"]=f.exports},d81d:function(t,e,n){"use strict";var a=n("23e7"),i=n("b727").map,o=n("1dde"),s=o("map");a({target:"Array",proto:!0,forced:!s},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=motion.754ae3f0.js.map