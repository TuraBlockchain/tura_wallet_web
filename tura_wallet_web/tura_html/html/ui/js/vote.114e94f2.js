(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vote"],{"0329":function(e){e.exports=JSON.parse('{"abi":[{"inputs":[{"internalType":"address","name":"_director","type":"address"}],"name":"addDirector","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_director","type":"address"}],"name":"delDirector","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_pid","type":"uint256"}],"name":"getVoted","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IERC20","name":"_votorToken","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"_pid","type":"uint256"},{"indexed":false,"internalType":"uint8","name":"Option","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"account","type":"uint256"}],"name":"GetVotor","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"string","name":"_name","type":"string"},{"internalType":"string","name":"_AOptions","type":"string"},{"internalType":"string","name":"_BOptions","type":"string"},{"internalType":"string","name":"_COptions","type":"string"},{"internalType":"string","name":"_DOptions","type":"string"},{"internalType":"string","name":"_FOptions","type":"string"},{"internalType":"bool","name":"_isMajorProposal","type":"bool"},{"internalType":"uint256","name":"_endDay","type":"uint256"}],"name":"proposal","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_pid","type":"uint256"},{"internalType":"bool","name":"isMandatorySettlement","type":"bool"}],"name":"proposaleCalculation","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"chairpersonUser","type":"address"},{"indexed":false,"internalType":"string","name":"_name","type":"string"},{"indexed":false,"internalType":"string","name":"_AOptions","type":"string"},{"indexed":false,"internalType":"string","name":"_BOptions","type":"string"},{"indexed":false,"internalType":"string","name":"_COptions","type":"string"},{"indexed":false,"internalType":"string","name":"_DOptions","type":"string"},{"indexed":false,"internalType":"string","name":"_FOptions","type":"string"},{"indexed":false,"internalType":"bool","name":"_isMajorProposal","type":"bool"}],"name":"ProposalEvent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_pid","type":"uint256"},{"indexed":false,"internalType":"address","name":"msgsender","type":"address"}],"name":"ProposalStop","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_pid","type":"uint256"},{"indexed":false,"internalType":"bool","name":"isMandatorySettlement","type":"bool"},{"indexed":false,"internalType":"address","name":"msgsender","type":"address"}],"name":"ProposaleCalculation","type":"event"},{"inputs":[{"internalType":"uint256","name":"_pid","type":"uint256"}],"name":"proposalStop","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"number","type":"uint256"}],"name":"setProposalValue","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_pid","type":"uint256"},{"internalType":"uint8","name":"_options","type":"uint8"},{"internalType":"uint256","name":"_votes","type":"uint256"}],"name":"vote","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"_pid","type":"uint256"},{"indexed":false,"internalType":"uint8","name":"Option","type":"uint8"},{"indexed":false,"internalType":"uint256","name":"_votes","type":"uint256"}],"name":"VoteEvent","type":"event"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"chairpersonMap","outputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"lastProposalBlockNumber","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"directors","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getProposalLen","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"endblock","type":"uint256"}],"name":"IsProposalEnd","outputs":[{"internalType":"bool","name":"isEnd","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint8","name":"","type":"uint8"}],"name":"ProposalOptions","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"Proposals","outputs":[{"internalType":"bool","name":"IsMajorProposal","type":"bool"},{"internalType":"address","name":"Chairperson","type":"address"},{"internalType":"string","name":"Name","type":"string"},{"internalType":"uint256","name":"OptionsTotalCounts","type":"uint256"},{"internalType":"bool","name":"IsEffective","type":"bool"},{"internalType":"bool","name":"IsVotingEnd","type":"bool"},{"internalType":"uint256","name":"StartTime","type":"uint256"},{"internalType":"uint256","name":"EndTime","type":"uint256"},{"internalType":"uint8","name":"WinOption","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint8","name":"","type":"uint8"}],"name":"ProposalsOptionsCounts","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"proposalValue","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"userForProposalOptionAndCounts","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"votorMap","outputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"voteCountTotal","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"address","name":"","type":"address"},{"internalType":"uint256","name":"","type":"uint256"}],"name":"votorOptionAndCounts","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]}')},1393:function(e,t,n){"use strict";var a=n("23e7"),i=n("857a"),s=n("af03");a({target:"String",proto:!0,forced:s("big")},{big:function(){return i(this,"big","","")}})},"1aa9":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vote-wrap"},[n("div",{staticClass:"postMotion",on:{click:e.goBack}},[n("el-button",{attrs:{type:"primary"}},[n("i",{staticClass:"fa fa-arrow-left",staticStyle:{"margin-right":"4px"}}),e._v(" All proposal ")])],1),n("div",{staticClass:"introduce-wrap"},[n("div",{staticClass:"vote-content"},[n("h2",[e._v("Proposal Name："+e._s(e.name.split("|")[0]||"--"))]),n("h2",{staticStyle:{"margin-top":"10px"}},[e._v("Proposal Publisher: "+e._s(e.add))]),n("h2",{staticStyle:{"margin-top":"10px"}},[n("h2",[e._v("Donation Recipient Address: "+e._s(e.name.split("|")[1]||"--"))]),n("h2",{staticStyle:{margin:"10px 0"}},[e._v(" Proposal Details: "+e._s(e.name.split("|")[2]||"--")+" ")]),n("h2",[e._v("Proposal publish time: "+e._s(e.formatDateTime(1e3*e.stime)))])]),n("h2",{staticStyle:{"margin-top":"10px"}},[e._v(" Proposal end time: "+e._s(e.formatDateTime(1e3*e.etime))+" ")]),n("h2",{staticStyle:{"margin-top":"10px"}},[e._v(" Is it an important proposal: "+e._s("true"==e.big?"Yes":"No")+" ")]),n("h2",{staticStyle:{"margin-top":"10px"}},[e._v(" Whether the proposal is over : "+e._s(e.IsVotingEnd?"Yes":"No")+" ")]),n("h2",{staticStyle:{"margin-top":"10px"}},[e._v(" Proposal approved option: "+e._s(e.IsVotingEnd&&"6"==e.win?1:"6"==e.win?"No":"4"==e.win?e.optionsList.length:Number(e.win)+1)+" ")]),n("h2",{staticStyle:{"margin-top":"10px"}},[e._v(" Number of votes of current proposal: "+e._s(e.optioncount)+" ")]),n("ul",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},e._l(e.optionsList,(function(t,a){return n("li",{key:a},[n("span",[n("el-radio",{attrs:{label:t.radioVal},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[n("span",[e._v(" "+e._s(a+1+". "+t.optionsText))]),n("span",{staticStyle:{"margin-left":"15px","font-weight":"600"}},[e._v(e._s("( Number of votes of this option: "+t.opVotes+" )"))])])],1)])})),0)]),n("div",{staticClass:"postVote"},[n("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:e.handlerPostVote}},[e._v("Voting")]),n("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:e.redeemtoken}},[e._v("Redeem token")]),e.isAdmin||e.add==e.getLocalStorage("walletaccount")?n("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:e.mustCalculate}},[e._v("Urgent calculation")]):e._e(),e.isAdmin||e.add==e.getLocalStorage("walletaccount")?n("el-button",{attrs:{type:"primary",disabled:e.disabled},on:{click:e.commonCalculate}},[e._v("Calculation")]):e._e()],1)])])},i=[],s=n("1da1"),o=n("5530"),r=(n("96cf"),n("b0c0"),n("1393"),n("159b"),n("a9e3"),n("99af"),n("d81d"),n("2f62")),c=n("fa7d"),u=n("12b8"),p=n("65e0"),l=n("0329"),d=n("854b"),m=n("99e5"),y={name:"vote",data:function(){return{disabled:!0,radio:"",optionsList:[],vote:this.$contractAddress.vote,iecTokenContract:this.$contractAddress.iecToken,iecConst:"",iectokenAuthed:"",pid:"",optioncount:"",name:"",status:"",add:"",stime:"",etime:"",big:"",win:"",IsVotingEnd:"",voteOptions:[],isAdmin:!1,loading:!0,isAuthedSuccess:!1}},computed:Object(o["a"])({},Object(r["c"])("login",["walletaccount"])),watch:{walletaccount:{handler:function(e){""!=e&&(this.disabled=!1)}},deep:!0,immediate:!0},activated:function(){this.disabled=!Object(c["c"])("walletaccount"),this.pid=this.$route.query.pid,this.optioncount=p["a"].movePointLeft(this.$route.query.optioncount,18),this.name=this.$route.query.name,this.status=this.$route.query.status,this.add=this.$route.query.add,this.stime=this.$route.query.stime,this.etime=this.$route.query.etime,this.big=this.$route.query.big,this.win=this.$route.query.win,this.optionsList=[],this.radio=[],this.voteOptions=[],this.loading=!0,this.getProposalOptions(),this.handlerIsAdmin(),this.isAuthed(),this.newMotionInfo()},methods:{formatDateTime:c["b"],getLocalStorage:c["c"],goBack:function(){this.$router.go(-1)},getProposalOptions:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.optionsList=[],e.connectMetaMask(),Object(c["c"])("walletaccount")?e.web3=e.$web3js.getWeb3():e.web3=new m("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),e.myaddress=Object(c["c"])("walletaccount")?Object(c["c"])("walletaccount"):"0xE91d5D70b07071f85568c15ABfEda2B3466A2705",e.iecConst=new e.web3.eth.Contract(l.abi,e.vote,{from:e.myaddress}),n=[],a=0;case 7:if(!(a<4)){t.next=16;break}return t.t0=n,t.next=11,e.iecConst.methods.ProposalOptions(e.pid,a).call();case 11:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 13:a++,t.next=7;break;case 16:n.forEach((function(t,n){t&&"Reject all options"!=t&&"NO"!=t&&e.optionsList.push({radioVal:n,optionsText:t})})),e.optionsList.push({radioVal:4,optionsText:"Reject all options"}),e.getvoteOption();case 19:case"end":return t.stop()}}),t)})))()},getvoteOption:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.connectMetaMask(),Object(c["c"])("walletaccount")?e.web3=e.$web3js.getWeb3():e.web3=new m("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),e.myaddress=Object(c["c"])("walletaccount"),e.iecConst=new e.web3.eth.Contract(l.abi,e.vote,{from:e.myaddress}),n=[],a=0;case 6:if(!(a<e.optionsList.length-1)){t.next=17;break}return t.t0=n,t.t1=Number,t.next=11,e.iecConst.methods.ProposalsOptionsCounts(e.pid,a).call();case 11:t.t2=t.sent,t.t3=(0,t.t1)(t.t2),t.t0.push.call(t.t0,t.t3);case 14:a++,t.next=6;break;case 17:return t.next=19,e.iecConst.methods.ProposalsOptionsCounts(e.pid,4).call();case 19:i=t.sent,n.push(Number(i)),e.voteOptions=[].concat(n),e.voteOptions.forEach((function(t,n){e.optionsList.map((function(e,a){n===a&&(e.opVotes=p["a"].movePointLeft(t,18))}))})),e.loading=!1,e.$forceUpdate();case 25:case"end":return t.stop()}}),t)})))()},handlerIsAdmin:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connectMetaMask(),Object(c["c"])("walletaccount")?e.web3=e.$web3js.getWeb3():e.web3=new m("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),e.myaddress=Object(c["c"])("walletaccount")?Object(c["c"])("walletaccount"):"0xE91d5D70b07071f85568c15ABfEda2B3466A2705",e.iecConst=new e.web3.eth.Contract(l.abi,e.vote,{from:e.myaddress}),t.next=6,e.iecConst.methods.directors(e.myaddress).call();case 6:e.isAdmin=t.sent;case 7:case"end":return t.stop()}}),t)})))()},newMotionInfo:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connectMetaMask(),Object(c["c"])("walletaccount")?e.web3=e.$web3js.getWeb3():e.web3=new m("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),e.myaddress=Object(c["c"])("walletaccount")?Object(c["c"])("walletaccount"):"0xE91d5D70b07071f85568c15ABfEda2B3466A2705",e.iecConst=new e.web3.eth.Contract(l.abi,e.vote,{from:e.myaddress}),t.next=6,e.iecConst.methods.Proposals(e.pid).call();case 6:n=t.sent,e.optioncount=p["a"].movePointLeft(n.OptionsTotalCounts,18),e.IsVotingEnd=n.IsVotingEnd,e.win=n.WinOption;case 10:case"end":return t.stop()}}),t)})))()},handlerPostVote:function(){var e=this,t=(new Date).getTime();t>1e3*this.etime?this.$message({message:"The Proposal has expired",type:"warning"}):this.IsVotingEnd?this.$message({message:"The vote of this proposal has ended, go to check other proposals",type:"warning"}):"number"==typeof this.radio?(this.isAuthed(),this.isAuthedSuccess?this.$prompt("Please input the number of vote","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",inputPattern:/^[0-9]*[1-9][0-9]*$/,inputErrorMessage:"The data entered is illegal"}).then((function(t){var n=t.value;e.voteValue=p["a"].movePointRight(n,18),e.voteToContract()})):this.handlerToAuth()):this.$message({message:"Please select the option to vote",type:"warning"})},voteToContract:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.connectMetaMask(),e.web3=e.$web3js.getWeb3(),e.myaddress=Object(c["c"])("walletaccount"),e.iecConst=new e.web3.eth.Contract(l.abi,e.vote,{from:e.myaddress}),n=e,n.iecConst.methods.vote(n.pid,n.radio,n.voteValue).send().on("transactionHash",(function(e){n.hash=e,a=n.$message({duration:0,message:"In transaction, please wait patiently"})})).on("receipt",(function(e){e.transactionHash==n.hash&&(a.close(),n.$message({message:"Successful Vote",type:"success"}),n.getProposalOptions(),n.newMotionInfo())})).on("error",(function(e,t){a.close(),n.$message({message:"Failed Vote！",type:"warning"})}));case 6:case"end":return t.stop()}}),t)})))()},redeemtoken:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.connectMetaMask(),e.web3=e.$web3js.getWeb3(),e.myaddress=Object(c["c"])("walletaccount"),e.iecConst=new e.web3.eth.Contract(l.abi,e.vote,{from:e.myaddress}),n=e,n.iecConst.methods.getVoted(n.pid).send().on("transactionHash",(function(e){n.hash=e,a=n.$message({duration:0,message:"In transaction, please wait patiently"})})).on("receipt",(function(e){e.transactionHash==n.hash&&(a.close(),n.$message({message:"Successful token withdrawal",type:"success"}))})).on("error",(function(e,t){a.close(),n.$message({message:"Failed token withdrawal！",type:"warning"})}));case 6:case"end":return t.stop()}}),t)})))()},mustCalculate:function(){this.connectMetaMask(),this.web3=this.$web3js.getWeb3(),this.isAdmin?this.myaddress=Object(c["c"])("walletaccount"):this.myaddress=this.add,this.iecConst=new this.web3.eth.Contract(l.abi,this.vote,{from:this.myaddress});var e,t=this;t.iecConst.methods.proposaleCalculation(t.pid,!0).send().on("transactionHash",(function(n){t.hash=n,e=t.$message({duration:0,message:"In transaction, please wait patiently"})})).on("receipt",(function(n){n.transactionHash==t.hash&&(e.close(),t.$message({message:"Successful urgent calculation",type:"success"}),t.newMotionInfo())})).on("error",(function(n,a){e.close(),t.$message({message:"Failed urgent calculation！",type:"warning"})}))},commonCalculate:function(){this.connectMetaMask(),this.web3=this.$web3js.getWeb3(),this.isAdmin?this.myaddress=Object(c["c"])("walletaccount"):this.myaddress=this.add,this.iecConst=new this.web3.eth.Contract(l.abi,this.vote,{from:this.myaddress});var e,t=this;t.iecConst.methods.proposaleCalculation(t.pid,!1).send().on("transactionHash",(function(n){t.hash=n,e=t.$message({duration:0,message:"In transaction, please wait patiently"})})).on("receipt",(function(n){n.transactionHash==t.hash&&(e.close(),t.$message({message:"Successful calculation",type:"success"}),t.newMotionInfo())})).on("error",(function(n,a){e.close(),t.$message({message:"Failed calculation！",type:"warning"})}))},isAuthed:function(){var e=this;this.connectMetaMask(),Object(c["c"])("walletaccount")?this.web3=this.$web3js.getWeb3():this.web3=new m("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),this.myaddress=Object(c["c"])("walletaccount")?Object(c["c"])("walletaccount"):"0xE91d5D70b07071f85568c15ABfEda2B3466A2705",this.iectokenAuthed=new this.web3.eth.Contract(d.abi,this.iecTokenContract,{from:this.myaddress});var t=this;t.iectokenAuthed.methods.allowance(t.myaddress,t.vote).call({from:t.myaddress}).then((function(t){t>0&&(e.isAuthedSuccess=!0)}))},handlerToAuth:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connectMetaMask(),e.web3=e.$web3js.getWeb3(),e.myaddress=Object(c["c"])("walletaccount"),e.iectokenAuthed=new e.web3.eth.Contract(d.abi,e.iecTokenContract,{from:e.myaddress}),t.next=6,p["a"].movePointRight(99999999,18);case 6:e.amount=t.sent,n=e,n.iectokenAuthed.methods.approve(n.vote,n.amount).send({from:n.myaddress}).on("transactionHash",(function(e){a=n.$message({duration:0,message:"In transaction, please wait patiently"}),n.hash=e})).on("receipt",(function(e){e.transactionHash==n.hash&&(a.close(),n.$message({message:"Please vote after the authorization is successful",type:"success"}),n.$confirm("Vote for the selected option","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then((function(){n.$prompt("Please input the number of vote","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",inputPattern:/^[0-9]*[1-9][0-9]*$/,inputErrorMessage:"The data entered is illegal"}).then((function(e){var t=e.value;n.voteValue=p["a"].movePointRight(t,18),n.voteToContract()}))})))})).on("error",(function(e,t){a.close(),n.$message({message:"Failed authorization",type:"success"})}));case 9:case"end":return t.stop()}}),t)})))()},connectMetaMask:function(){u["a"].connectMetaMask().then((function(e){Object(c["c"])("walletaccount")}))}}},h=y,b=(n("ddf9"),n("2877")),f=Object(b["a"])(h,a,i,!1,null,"b5fe0e06",null);t["default"]=f.exports},"20b1":function(e,t,n){"use strict";n("da87")},"30f3":function(e){e.exports=JSON.parse('{"abi":[{"inputs":[{"internalType":"address","name":"_admin","type":"address"}],"name":"delAdmin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IERC20","name":"lec","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"EmergencyStop","type":"event"},{"inputs":[{"internalType":"uint256","name":"endTime_","type":"uint256"},{"internalType":"uint256","name":"airdropCoinNumber_","type":"uint256"},{"internalType":"uint256","name":"airdropCoinTatol_","type":"uint256"}],"name":"newAirDrop","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"endTime_","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"airdropCoiNumber_","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"airdropCoinTatol_","type":"uint256"}],"name":"newAirDropEvent","type":"event"},{"inputs":[{"internalType":"uint256","name":"id_","type":"uint256"}],"name":"receiveAirdrop","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_admin","type":"address"}],"name":"setAdmin","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"contract IERC20","name":"_token","type":"address"},{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"TokenTransferOut","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"number","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"userReceiveAirdrop","type":"event"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"admin","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"airdropMap","outputs":[{"internalType":"uint256","name":"endTime","type":"uint256"},{"internalType":"uint256","name":"airdropCoinNumber","type":"uint256"},{"internalType":"uint256","name":"airdropCoinTatol","type":"uint256"},{"internalType":"uint256","name":"hasairdropNumber","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"address","name":"","type":"address"}],"name":"airdropUserMap","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"id","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]}')},"4ddd":function(e,t,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("dde9")},"66b9":function(e,t,n){"use strict";n("68ef"),n("9d70"),n("3743"),n("e3b3"),n("bc1b")},"78eb":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={inject:{vanField:{default:null}},watch:{value:function(){var e=this.vanField;e&&(e.resetValidation(),e.validateWithTrigger("onChange"))}},created:function(){var e=this.vanField;e&&!e.children&&(e.children=this)}}},"854b":function(e){e.exports=JSON.parse('{"abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_publicWareHouse","type":"address"}],"name":"setPublicWareHouse","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_publicWelfareFund","type":"address"}],"name":"setPublicWelfareFund","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_uniSwap","type":"address"}],"name":"setUniSwap","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"transferToPublicWareHouse","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"transferToPublicWelfareFund","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"transferToUniSwap","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_number","type":"uint256"}],"name":"upDateAddressNumber","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"bool","name":"isexist","type":"bool"}],"name":"upDateIsExist","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getAddressNumber","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getOwner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"publicWareHouse","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"publicWelfareFund","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"uniSwap","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"}]}')},"9abe":function(e,t,n){},"9f14":function(e,t,n){"use strict";var a=n("d282"),i=n("ad06"),s=n("78eb"),o=n("9884"),r=n("ea8e"),c=function(e){var t=e.parent,n=e.bem,a=e.role;return{mixins:[Object(o["a"])(t),s["a"]],props:{name:null,value:null,disabled:Boolean,iconSize:[Number,String],checkedColor:String,labelPosition:String,labelDisabled:Boolean,shape:{type:String,default:"round"},bindGroup:{type:Boolean,default:!0}},computed:{disableBindRelation:function(){return!this.bindGroup},isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled},direction:function(){return this.parent&&this.parent.direction||null},iconStyle:function(){var e=this.checkedColor||this.parent&&this.parent.checkedColor;if(e&&this.checked&&!this.isDisabled)return{borderColor:e,backgroundColor:e}},tabindex:function(){return this.isDisabled||"radio"===a&&!this.checked?-1:0}},methods:{onClick:function(e){var t=this,n=e.target,a=this.$refs.icon,i=a===n||a.contains(n);this.isDisabled||!i&&this.labelDisabled?this.$emit("click",e):(this.toggle(),setTimeout((function(){t.$emit("click",e)})))},genIcon:function(){var e=this.$createElement,t=this.checked,a=this.iconSize||this.parent&&this.parent.iconSize;return e("div",{ref:"icon",class:n("icon",[this.shape,{disabled:this.isDisabled,checked:t}]),style:{fontSize:Object(r["a"])(a)}},[this.slots("icon",{checked:t})||e(i["a"],{attrs:{name:"success"},style:this.iconStyle})])},genLabel:function(){var e=this.$createElement,t=this.slots();if(t)return e("span",{class:n("label",[this.labelPosition,{disabled:this.isDisabled}])},[t])}},render:function(){var e=arguments[0],t=[this.genIcon()];return"left"===this.labelPosition?t.unshift(this.genLabel()):t.push(this.genLabel()),e("div",{attrs:{role:a,tabindex:this.tabindex,"aria-checked":String(this.checked)},class:n([{disabled:this.isDisabled,"label-disabled":this.labelDisabled},this.direction]),on:{click:this.onClick}},[t])}}},u=Object(a["a"])("radio"),p=u[0],l=u[1];t["a"]=p({mixins:[c({bem:l,role:"radio",parent:"vanRadio"})],computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(e){(this.parent||this).$emit("input",e)}},checked:function(){return this.currentValue===this.name}},methods:{toggle:function(){this.currentValue=this.name}}})},a446:function(e,t,n){},a44c:function(e,t,n){"use strict";n("68ef"),n("dc1b")},a4e5:function(e,t,n){"use strict";n("a446")},b965:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vote-wrap"},[n("div",{staticClass:"introduce-wrap"},[n("div",{staticClass:"vote-content"},[n("h2",[e._v("Proposal Name：")]),n("h3",[e._v(" "+e._s(e.name.split("|")[0]||"--")+" ")]),n("h2",{staticStyle:{"margin-top":"10px"}},[e._v("Proposal publisher:")]),n("h3",{staticStyle:{"word-break":"break-all"}},[e._v(" "+e._s(e.add)+" ")]),n("h2",{staticStyle:{"margin-top":"10px"}},[e._v("Donation Recipient Address")]),n("h3",{staticStyle:{"word-break":"break-all"}},[e._v(" "+e._s(e.name.split("|")[1]||"--")+" ")]),n("h2",{staticStyle:{"margin-top":"10px"}},[e._v("Proposal Details")]),n("h3",[e._v(" "+e._s(e.name.split("|")[2]||"--")+" ")]),n("h2",{staticStyle:{"margin-top":"10px"}},[e._v(" Proposal publish time: ")]),n("h3",[e._v(" "+e._s(e.formatDateTime(1e3*e.stime))+" ")]),n("h2",{staticStyle:{"margin-top":"10px"}},[e._v(" Proposal end time: ")]),n("h3",[e._v(" "+e._s(e.formatDateTime(1e3*e.etime))+" ")]),n("h2",{staticStyle:{"margin-top":"10px"}},[e._v(" Is it an important proposal: "+e._s("true"==e.big?"Yes":"No")+" ")]),n("h2",{staticStyle:{"margin-top":"10px"}},[e._v(" Whether the proposal is over : "+e._s(e.IsVotingEnd?"Yes":"No")+" ")]),n("h2",{staticStyle:{"margin-top":"10px"}},[e._v(" Proposal approved option: "+e._s(e.IsVotingEnd&&"6"==e.win?1:"6"==e.win?"No":"4"==e.win?e.optionsList.length:Number(e.win)+1)+" ")]),n("h2",{staticStyle:{"margin-top":"10px"}},[e._v(" Number of votes of current proposal: "+e._s(e.optioncount)+" ")]),n("ul",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},e._l(e.optionsList,(function(t,a){return n("li",{key:a},[n("RadioGroup",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[n("Radio",{attrs:{name:t.radioVal}},[n("span",[e._v(" "+e._s(a+1+". "+t.optionsText))]),n("span",{staticStyle:{"margin-left":"15px"}},[e._v(e._s("( Number of votes of this option: "+t.opVotes+" )"))])])],1)],1)})),0)]),n("div",{staticClass:"postVote"},[n("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"info",disabled:e.disabled},on:{click:e.handlerPostVote}},[e._v(" Voting ")]),n("Button",{attrs:{type:"info",disabled:e.disabled},on:{click:e.redeemtoken}},[e._v(" Redeem token ")]),e.isAdmin||e.add==e.getLocalStorage("walletaccount")?n("Button",{staticStyle:{margin:"0 5px"},attrs:{type:"info",disabled:e.disabled},on:{click:e.mustCalculate}},[e._v("Urgent calculation")]):e._e(),e.isAdmin||e.add==e.getLocalStorage("walletaccount")?n("Button",{attrs:{type:"info",disabled:e.disabled},on:{click:e.commonCalculate}},[e._v("Calculation")]):e._e()],1)])])},i=[],s=n("1da1"),o=n("5530"),r=(n("66b9"),n("b650")),c=(n("4ddd"),n("9f14")),u=(n("a44c"),n("e27c")),p=(n("96cf"),n("b0c0"),n("1393"),n("159b"),n("a9e3"),n("99af"),n("d81d"),n("2f62")),l=n("fa7d"),d=n("12b8"),m=n("65e0"),y=n("0329"),h=n("854b"),b=n("99e5"),f={components:{RadioGroup:u["a"],Radio:c["a"],Button:r["a"]},data:function(){return{disabled:!0,radio:"",optionsList:[],vote:this.$contractAddress.vote,iecTokenContract:this.$contractAddress.iecToken,iecConst:"",iectokenAuthed:"",pid:"",optioncount:"",name:"",status:"",add:"",stime:"",etime:"",big:"",win:"",IsVotingEnd:"",voteOptions:[],isAdmin:!1,loading:!0,isAuthedSuccess:!1}},computed:Object(o["a"])({},Object(p["c"])("login",["walletaccount"])),watch:{walletaccount:{handler:function(e){""!=e&&(this.disabled=!1)}},deep:!0,immediate:!0},activated:function(){this.disabled=!Object(l["c"])("walletaccount"),this.pid=this.$route.query.pid,this.optioncount=m["a"].movePointLeft(this.$route.query.optioncount,18),this.name=this.$route.query.name,this.status=this.$route.query.status,this.add=this.$route.query.add,this.stime=this.$route.query.stime,this.etime=this.$route.query.etime,this.big=this.$route.query.big,this.win=this.$route.query.win,this.optionsList=[],this.radio=[],this.voteOptions=[],this.loading=!0,this.getProposalOptions(),this.handlerIsAdmin(),this.isAuthed(),this.newMotionInfo()},methods:{formatDateTime:l["b"],getLocalStorage:l["c"],getProposalOptions:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.optionsList=[],e.connectMetaMask(),Object(l["c"])("walletaccount")?e.web3=e.$web3js.getWeb3():e.web3=new b("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),e.myaddress=Object(l["c"])("walletaccount")?Object(l["c"])("walletaccount"):"0xE91d5D70b07071f85568c15ABfEda2B3466A2705",e.iecConst=new e.web3.eth.Contract(y.abi,e.vote,{from:e.myaddress}),n=[],a=0;case 7:if(!(a<4)){t.next=16;break}return t.t0=n,t.next=11,e.iecConst.methods.ProposalOptions(e.pid,a).call();case 11:t.t1=t.sent,t.t0.push.call(t.t0,t.t1);case 13:a++,t.next=7;break;case 16:n.forEach((function(t,n){t&&"Reject all options"!=t&&"NO"!=t&&e.optionsList.push({radioVal:n,optionsText:t})})),e.optionsList.push({radioVal:4,optionsText:"Reject all options"}),e.getvoteOption();case 19:case"end":return t.stop()}}),t)})))()},getvoteOption:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.connectMetaMask(),Object(l["c"])("walletaccount")?e.web3=e.$web3js.getWeb3():e.web3=new b("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),e.myaddress=Object(l["c"])("walletaccount"),e.iecConst=new e.web3.eth.Contract(y.abi,e.vote,{from:e.myaddress}),n=[],a=0;case 6:if(!(a<e.optionsList.length-1)){t.next=17;break}return t.t0=n,t.t1=Number,t.next=11,e.iecConst.methods.ProposalsOptionsCounts(e.pid,a).call();case 11:t.t2=t.sent,t.t3=(0,t.t1)(t.t2),t.t0.push.call(t.t0,t.t3);case 14:a++,t.next=6;break;case 17:return t.next=19,e.iecConst.methods.ProposalsOptionsCounts(e.pid,4).call();case 19:i=t.sent,n.push(Number(i)),e.voteOptions=[].concat(n),e.voteOptions.forEach((function(t,n){e.optionsList.map((function(e,a){n===a&&(e.opVotes=m["a"].movePointLeft(t,18))}))})),e.loading=!1,e.$forceUpdate();case 25:case"end":return t.stop()}}),t)})))()},handlerIsAdmin:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connectMetaMask(),Object(l["c"])("walletaccount")?e.web3=e.$web3js.getWeb3():e.web3=new b("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),e.myaddress=Object(l["c"])("walletaccount")?Object(l["c"])("walletaccount"):"0xE91d5D70b07071f85568c15ABfEda2B3466A2705",e.iecConst=new e.web3.eth.Contract(y.abi,e.vote,{from:e.myaddress}),t.next=6,e.iecConst.methods.directors(e.myaddress).call();case 6:e.isAdmin=t.sent;case 7:case"end":return t.stop()}}),t)})))()},newMotionInfo:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connectMetaMask(),Object(l["c"])("walletaccount")?e.web3=e.$web3js.getWeb3():e.web3=new b("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),e.myaddress=Object(l["c"])("walletaccount")?Object(l["c"])("walletaccount"):"0xE91d5D70b07071f85568c15ABfEda2B3466A2705",e.iecConst=new e.web3.eth.Contract(y.abi,e.vote,{from:e.myaddress}),t.next=6,e.iecConst.methods.Proposals(e.pid).call();case 6:n=t.sent,e.optioncount=m["a"].movePointLeft(n.OptionsTotalCounts,18),e.IsVotingEnd=n.IsVotingEnd,e.win=n.WinOption;case 10:case"end":return t.stop()}}),t)})))()},handlerPostVote:function(){var e=this,t=(new Date).getTime();t>1e3*this.etime?this.$toast({message:"The Proposal has expired"}):this.IsVotingEnd?this.$toast({message:"The vote of this proposal has ended, go to check other proposals"}):"number"==typeof this.radio?(this.isAuthed(),this.isAuthedSuccess?this.$prompt("Please input the number of vote","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",inputPattern:/^[0-9]*[1-9][0-9]*$/,inputErrorMessage:"The data entered is illegal"}).then((function(t){var n=t.value;e.voteValue=m["a"].movePointRight(n,18),e.voteToContract()})):this.handlerToAuth()):this.$toast({message:"Please select the option to vote"})},voteToContract:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.connectMetaMask(),e.web3=e.$web3js.getWeb3(),e.myaddress=Object(l["c"])("walletaccount"),e.iecConst=new e.web3.eth.Contract(y.abi,e.vote,{from:e.myaddress}),n=e,n.iecConst.methods.vote(n.pid,n.radio,n.voteValue).send().on("transactionHash",(function(e){n.hash=e,a=n.$toast({duration:0,message:"In transaction, please wait patiently"})})).on("receipt",(function(e){e.transactionHash==n.hash&&(a.close(),n.$toast({message:"Successful Vote"}),n.getProposalOptions(),n.newMotionInfo())})).on("error",(function(e,t){a.close(),n.$toast({message:"Failed Vote！"})}));case 6:case"end":return t.stop()}}),t)})))()},redeemtoken:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.connectMetaMask(),e.web3=e.$web3js.getWeb3(),e.myaddress=Object(l["c"])("walletaccount"),e.iecConst=new e.web3.eth.Contract(y.abi,e.vote,{from:e.myaddress}),n=e,n.iecConst.methods.getVoted(n.pid).send().on("transactionHash",(function(e){n.hash=e,a=n.$toast({duration:0,message:"In transaction, please wait patiently"})})).on("receipt",(function(e){e.transactionHash==n.hash&&(a.close(),n.$toast({message:"Successful token withdrawal"}))})).on("error",(function(e,t){a.close(),n.$toast({message:"Failed token withdrawal"})}));case 6:case"end":return t.stop()}}),t)})))()},mustCalculate:function(){this.connectMetaMask(),this.web3=this.$web3js.getWeb3(),this.isAdmin?this.myaddress=Object(l["c"])("walletaccount"):this.myaddress=this.add,this.iecConst=new this.web3.eth.Contract(y.abi,this.vote,{from:this.myaddress});var e,t=this;t.iecConst.methods.proposaleCalculation(t.pid,!0).send().on("transactionHash",(function(n){t.hash=n,e=t.$toast({duration:0,message:"In transaction, please wait patiently"})})).on("receipt",(function(n){n.transactionHash==t.hash&&(e.close(),t.$toast({message:"Successful urgent calculation"}),t.newMotionInfo())})).on("error",(function(n,a){e.close(),t.$toast({message:"Failed urgent calculation！"})}))},commonCalculate:function(){this.connectMetaMask(),this.web3=this.$web3js.getWeb3(),this.isAdmin?this.myaddress=Object(l["c"])("walletaccount"):this.myaddress=this.add,this.iecConst=new this.web3.eth.Contract(y.abi,this.vote,{from:this.myaddress});var e,t=this;t.iecConst.methods.proposaleCalculation(t.pid,!1).send().on("transactionHash",(function(n){t.hash=n,e=t.$toast({duration:0,message:"In transaction, please wait patiently"})})).on("receipt",(function(n){n.transactionHash==t.hash&&(e.close(),t.$toast({message:"Successful calculation"}),t.newMotionInfo())})).on("error",(function(n,a){e.close(),t.$toast({message:"Failed calculation"})}))},isAuthed:function(){var e=this;this.connectMetaMask(),Object(l["c"])("walletaccount")?this.web3=this.$web3js.getWeb3():this.web3=new b("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),this.myaddress=Object(l["c"])("walletaccount")?Object(l["c"])("walletaccount"):"0xE91d5D70b07071f85568c15ABfEda2B3466A2705",this.iectokenAuthed=new this.web3.eth.Contract(h.abi,this.iecTokenContract,{from:this.myaddress});var t=this;t.iectokenAuthed.methods.allowance(t.myaddress,t.vote).call({from:t.myaddress}).then((function(t){t>0&&(e.isAuthedSuccess=!0)}))},handlerToAuth:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connectMetaMask(),e.web3=e.$web3js.getWeb3(),e.myaddress=Object(l["c"])("walletaccount"),e.iectokenAuthed=new e.web3.eth.Contract(h.abi,e.iecTokenContract,{from:e.myaddress}),t.next=6,m["a"].movePointRight(99999999,18);case 6:e.amount=t.sent,n=e,n.iectokenAuthed.methods.approve(n.vote,n.amount).send({from:n.myaddress}).on("transactionHash",(function(e){a=n.$toast({duration:0,message:"In transaction, please wait patiently"}),n.hash=e})).on("receipt",(function(e){e.transactionHash==n.hash&&(a.close(),n.$toast({message:"Please vote after the authorization is successful"}),n.$confirm("Vote for the selected option","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then((function(){n.$prompt("Please input the number of vote","Tips",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",inputPattern:/^[0-9]*[1-9][0-9]*$/,inputErrorMessage:"The data entered is illegal"}).then((function(e){var t=e.value;n.voteValue=m["a"].movePointRight(t,18),n.voteToContract()}))})))})).on("error",(function(e,t){a.close(),n.$toast({message:"Failed authorization"})}));case 9:case"end":return t.stop()}}),t)})))()},connectMetaMask:function(){d["a"].connectMetaMask().then((function(e){Object(l["c"])("walletaccount")}))}}},w=f,v=(n("20b1"),n("2877")),g=Object(v["a"])(w,a,i,!1,null,"1d0b29a2",null);t["default"]=g.exports},d81d:function(e,t,n){"use strict";var a=n("23e7"),i=n("b727").map,s=n("1dde"),o=s("map");a({target:"Array",proto:!0,forced:!o},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},da87:function(e,t,n){},dc1b:function(e,t,n){},dde9:function(e,t,n){},ddf9:function(e,t,n){"use strict";n("9abe")},e27c:function(e,t,n){"use strict";var a=n("d282"),i=n("78eb"),s=n("9884"),o=Object(a["a"])("radio-group"),r=o[0],c=o[1];t["a"]=r({mixins:[Object(s["b"])("vanRadio"),i["a"]],props:{value:null,disabled:Boolean,direction:String,checkedColor:String,iconSize:[Number,String]},watch:{value:function(e){this.$emit("change",e)}},render:function(){var e=arguments[0];return e("div",{class:c([this.direction]),attrs:{role:"radiogroup"}},[this.slots()])}})},fb2c:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"airdrop-wrap"},[n("div",{staticClass:"introduce-wrap"},[e.isairdropnoexpire?e._e():n("div",{staticStyle:{"margin-left":"80px"}},[n("h2",[e._v(" Deadline of the period："+e._s(e.formatDateTime(1e3*e.airdropdetailendtime)||"--")+" ")]),n("h2",{staticStyle:{margin:"15px 0"}},[e._v(" Airdrop number："+e._s(e.airdropCoinNumber||0)+" ")]),n("h2",[e._v("Total number of airdrops："+e._s(e.airdropCoinTatol||0))]),n("h2",{staticStyle:{margin:"15px 0"}},[e._v(" Airdropped quantity："+e._s(e.hasairdropNumber||0)+" ")])]),n("div",{staticStyle:{margin:"20px 0 50px"}},[n("el-button",{staticStyle:{"margin-left":"80px"},attrs:{type:"primary",disabled:e.disabled},on:{click:e.receiveAirdrop}},[e._v("Receive Airdrop")])],1),e.isadmin&&e.isairdropnoexpire?n("div",{staticStyle:{"margin-bottom":"70px"}},[n("el-form",{ref:"form",attrs:{"label-width":"140px"}},[n("el-form-item",{attrs:{label:"Expire Date:"}},[n("el-input",{attrs:{placeholder:"Please input the Expire Date",maxlength:"“45"},model:{value:e.expireDate,callback:function(t){e.expireDate=t},expression:"expireDate"}})],1),n("el-form-item",{attrs:{label:"Number of airdrops:"}},[n("el-input",{attrs:{placeholder:"Please input the Number of airdrops",maxlength:"“45"},model:{value:e.receiveNum,callback:function(t){e.receiveNum=t},expression:"receiveNum"}})],1),n("el-form-item",{attrs:{label:"Airdrop Total:"}},[n("el-input",{attrs:{placeholder:"Please input the Airdrop Total",maxlength:"“45"},model:{value:e.airdropTotal,callback:function(t){e.airdropTotal=t},expression:"airdropTotal"}})],1)],1),e.isAuthedSuccess?n("el-button",{staticStyle:{"margin-left":"80px"},attrs:{type:"primary",disabled:e.disabled},on:{click:e.setExpiredTime}},[e._v("Set Config")]):n("el-button",{staticStyle:{"margin-left":"80px"},attrs:{type:"primary",disabled:e.disabled},on:{click:e.handlerToAuth}},[e._v("Authorize")])],1):e._e()])])},i=[],s=n("1da1"),o=n("5530"),r=(n("96cf"),n("2f62")),c=n("fa7d"),u=n("12b8"),p=n("65e0"),l=n("99e5"),d=n("854b"),m=n("30f3"),y={data:function(){return{disabled:!0,isadmin:!1,receiveId:"",iectokenAuthed:"",isAuthedSuccess:!1,iecTokenContract:this.$contractAddress.iecToken,iecConst:"",expireDate:"",airdropTotal:"",receiveNum:"",onlyairdropContractAdd:this.$contractAddress.onlyairdropContractAdd,onlyairdropConst:"",isairdropnoexpire:!1,airdropdetailendtime:"",airdropCoinNumber:"",airdropCoinTatol:"",hasairdropNumber:""}},computed:Object(o["a"])({},Object(r["c"])("login",["walletaccount"])),activated:function(){this.disabled=!Object(c["c"])("walletaccount"),Object(c["c"])("walletaccount")&&(this.handlerIsAdmin(),this.getreceiveId(),this.isAuthed())},methods:{formatDateTime:c["b"],isAuthed:function(){var e=this;this.connectMetaMask(),Object(c["c"])("walletaccount")?this.web3=this.$web3js.getWeb3():this.web3=new l("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),this.myaddress=Object(c["c"])("walletaccount")?Object(c["c"])("walletaccount"):"0xE91d5D70b07071f85568c15ABfEda2B3466A2705",this.iectokenAuthed=new this.web3.eth.Contract(d.abi,this.iecTokenContract,{from:this.myaddress});var t=this;t.iectokenAuthed.methods.allowance(t.myaddress,t.onlyairdropContractAdd).call({from:t.myaddress}).then((function(t){t>0&&(e.isAuthedSuccess=!0)}))},handlerIsAdmin:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connectMetaMask(),Object(c["c"])("walletaccount")?e.web3=e.$web3js.getWeb3():e.web3=new l("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),e.myaddress=Object(c["c"])("walletaccount")?Object(c["c"])("walletaccount"):"0xE91d5D70b07071f85568c15ABfEda2B3466A2705",e.iecConst=new e.web3.eth.Contract(m.abi,e.onlyairdropContractAdd,{from:e.myaddress}),t.next=6,e.iecConst.methods.admin(e.myaddress).call();case 6:if(!t.sent){t.next=8;break}e.isadmin=!0;case 8:case"end":return t.stop()}}),t)})))()},getreceiveId:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connectMetaMask(),Object(c["c"])("walletaccount")?e.web3=e.$web3js.getWeb3():e.web3=new l("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),e.myaddress=Object(c["c"])("walletaccount")?Object(c["c"])("walletaccount"):"0xE91d5D70b07071f85568c15ABfEda2B3466A2705",e.iecConst=new e.web3.eth.Contract(m.abi,e.onlyairdropContractAdd,{from:e.myaddress}),t.next=6,e.iecConst.methods.id().call();case 6:n=t.sent,e.receiveId=n,e.getairdropdetail(e.receiveId);case 9:case"end":return t.stop()}}),t)})))()},getairdropdetail:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.connectMetaMask(),Object(c["c"])("walletaccount")?t.web3=t.$web3js.getWeb3():t.web3=new l("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),t.myaddress=Object(c["c"])("walletaccount")?Object(c["c"])("walletaccount"):"0xE91d5D70b07071f85568c15ABfEda2B3466A2705",t.iecConst=new t.web3.eth.Contract(m.abi,t.onlyairdropContractAdd,{from:t.myaddress}),n.next=6,t.iecConst.methods.airdropMap(e).call();case 6:return a=n.sent,t.airdropdetailendtime=a.endTime,i=(new Date).getTime(),i>1e3*t.airdropdetailendtime&&(t.isairdropnoexpire=!0),n.next=12,p["a"].movePointLeft(a.airdropCoinNumber,18);case 12:return t.airdropCoinNumber=n.sent,n.next=15,p["a"].movePointLeft(a.airdropCoinTatol,18);case 15:return t.airdropCoinTatol=n.sent,n.next=18,p["a"].movePointLeft(a.hasairdropNumber,18);case 18:t.hasairdropNumber=n.sent;case 19:case"end":return n.stop()}}),n)})))()},receiveAirdrop:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.connectMetaMask(),e.web3=e.$web3js.getWeb3(),e.myaddress=Object(c["c"])("walletaccount"),e.onlyairdropConst=new e.web3.eth.Contract(m.abi,e.onlyairdropContractAdd,{from:e.myaddress}),n=e,n.onlyairdropConst.methods.receiveAirdrop(n.receiveId).send().on("transactionHash",(function(e){n.hash=e,a=n.$message({duration:0,message:"In transaction, please wait patiently"})})).on("receipt",(function(e){e.transactionHash==n.hash&&(a.close(),n.$message({message:"Receive Donation is successful",type:"success"}),n.donationAdd="",n.getreceiveId(),n.$store.dispatch("ActionRouterKey"))})).on("error",(function(e,t){a.close(),n.$message({message:"Receive Donation failed, try later",type:"warning"})}));case 6:case"end":return t.stop()}}),t)})))()},setExpiredTime:function(){if(this.isAuthed(),this.isAuthedSuccess){if(""==this.expireDate)return void this.$message({message:"expire Date cannot be empty",type:"warning"});if(""==this.receiveNum)return void this.$message({message:"Quantity received cannot be empty",type:"warning"});if(""==this.airdropTotal)return void this.$message({message:"Airdrop total cannot be empty",type:"warning"});this.setconfigInfo()}else this.handlerToAuth()},setconfigInfo:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a,i,s,o,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connectMetaMask(),e.web3=e.$web3js.getWeb3(),e.myaddress=Object(c["c"])("walletaccount"),e.onlyairdropConst=new e.web3.eth.Contract(m.abi,e.onlyairdropContractAdd,{from:e.myaddress}),n=e,i=24*n.expireDate*60*60,s=i,t.next=9,p["a"].movePointRight(n.receiveNum,18);case 9:return o=t.sent,t.next=12,p["a"].movePointRight(n.airdropTotal,18);case 12:r=t.sent,n.onlyairdropConst.methods.newAirDrop(s,o,r).send().on("transactionHash",(function(e){n.hash=e,a=n.$message({duration:0,message:"In transaction, please wait patiently"})})).on("receipt",(function(e){e.transactionHash==n.hash&&(a.close(),n.$message({message:"Set successfully",type:"success"})),n.getreceiveId(),n.$store.dispatch("ActionRouterKey"),n.expireDate="",n.airdropTotal="",n.receiveNum=""})).on("error",(function(e,t){a.close(),n.$message({message:"Set failed, try later",type:"warning"})}));case 14:case"end":return t.stop()}}),t)})))()},handlerToAuth:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.connectMetaMask(),e.web3=e.$web3js.getWeb3(),e.myaddress=Object(c["c"])("walletaccount"),e.iectokenAuthed=new e.web3.eth.Contract(d.abi,e.iecTokenContract,{from:e.myaddress}),t.next=6,p["a"].movePointRight(99999999,18);case 6:e.amount=t.sent,n=e,n.iectokenAuthed.methods.approve(n.onlyairdropContractAdd,n.amount).send({from:n.myaddress}).on("transactionHash",(function(e){a=n.$message({duration:0,message:"In transaction, please wait patiently"}),n.hash=e})).on("receipt",(function(e){e.transactionHash==n.hash&&(a.close(),n.$message({message:"Authorization is successful, fill in the configuration information and submit",type:"success"}),n.isAuthedSuccess=!0)})).on("error",(function(e,t){a.close(),n.$message({message:"Failed authorization",type:"success"})}));case 9:case"end":return t.stop()}}),t)})))()},connectMetaMask:function(){u["a"].connectMetaMask().then((function(e){Object(c["c"])("walletaccount")}))}}},h=y,b=(n("a4e5"),n("2877")),f=Object(b["a"])(h,a,i,!1,null,"66fb77f0",null);t["default"]=f.exports}}]);
//# sourceMappingURL=vote.114e94f2.js.map