(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["postMotion"],{"0dac":function(e,t,i){"use strict";i("e054")},"4ddd":function(e,t,i){"use strict";i("68ef"),i("9d70"),i("3743"),i("dde9")},"78eb":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={inject:{vanField:{default:null}},watch:{value:function(){var e=this.vanField;e&&(e.resetValidation(),e.validateWithTrigger("onChange"))}},created:function(){var e=this.vanField;e&&!e.children&&(e.children=this)}}},"9f14":function(e,t,i){"use strict";var n=i("d282"),o=i("ad06"),a=i("78eb"),s=i("9884"),r=i("ea8e"),l=function(e){var t=e.parent,i=e.bem,n=e.role;return{mixins:[Object(s["a"])(t),a["a"]],props:{name:null,value:null,disabled:Boolean,iconSize:[Number,String],checkedColor:String,labelPosition:String,labelDisabled:Boolean,shape:{type:String,default:"round"},bindGroup:{type:Boolean,default:!0}},computed:{disableBindRelation:function(){return!this.bindGroup},isDisabled:function(){return this.parent&&this.parent.disabled||this.disabled},direction:function(){return this.parent&&this.parent.direction||null},iconStyle:function(){var e=this.checkedColor||this.parent&&this.parent.checkedColor;if(e&&this.checked&&!this.isDisabled)return{borderColor:e,backgroundColor:e}},tabindex:function(){return this.isDisabled||"radio"===n&&!this.checked?-1:0}},methods:{onClick:function(e){var t=this,i=e.target,n=this.$refs.icon,o=n===i||n.contains(i);this.isDisabled||!o&&this.labelDisabled?this.$emit("click",e):(this.toggle(),setTimeout((function(){t.$emit("click",e)})))},genIcon:function(){var e=this.$createElement,t=this.checked,n=this.iconSize||this.parent&&this.parent.iconSize;return e("div",{ref:"icon",class:i("icon",[this.shape,{disabled:this.isDisabled,checked:t}]),style:{fontSize:Object(r["a"])(n)}},[this.slots("icon",{checked:t})||e(o["a"],{attrs:{name:"success"},style:this.iconStyle})])},genLabel:function(){var e=this.$createElement,t=this.slots();if(t)return e("span",{class:i("label",[this.labelPosition,{disabled:this.isDisabled}])},[t])}},render:function(){var e=arguments[0],t=[this.genIcon()];return"left"===this.labelPosition?t.unshift(this.genLabel()):t.push(this.genLabel()),e("div",{attrs:{role:n,tabindex:this.tabindex,"aria-checked":String(this.checked)},class:i([{disabled:this.isDisabled,"label-disabled":this.labelDisabled},this.direction]),on:{click:this.onClick}},[t])}}},c=Object(n["a"])("radio"),d=c[0],p=c[1];t["a"]=d({mixins:[l({bem:p,role:"radio",parent:"vanRadio"})],computed:{currentValue:{get:function(){return this.parent?this.parent.value:this.value},set:function(e){(this.parent||this).$emit("input",e)}},checked:function(){return this.currentValue===this.name}},methods:{toggle:function(){this.currentValue=this.name}}})},a434:function(e,t,i){"use strict";var n=i("23e7"),o=i("23cb"),a=i("a691"),s=i("50c4"),r=i("7b0b"),l=i("65f0"),c=i("8418"),d=i("1dde"),p=d("splice"),u=Math.max,h=Math.min,f=9007199254740991,m="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!p},{splice:function(e,t){var i,n,d,p,b,v,w=r(this),g=s(w.length),k=o(e,g),x=arguments.length;if(0===x?i=n=0:1===x?(i=0,n=g-k):(i=x-2,n=h(u(a(t),0),g-k)),g+i-n>f)throw TypeError(m);for(d=l(w,n),p=0;p<n;p++)b=k+p,b in w&&c(d,p,w[b]);if(d.length=n,i<n){for(p=k;p<g-n;p++)b=p+n,v=p+i,b in w?w[v]=w[b]:delete w[v];for(p=g;p>g-n+i;p--)delete w[p-1]}else if(i>n)for(p=g-n;p>k;p--)b=p+n-1,v=p+i-1,b in w?w[v]=w[b]:delete w[v];for(p=0;p<i;p++)w[p+k]=arguments[p+2];return w.length=g-n+i,d}})},a44c:function(e,t,i){"use strict";i("68ef"),i("dc1b")},dc1b:function(e,t,i){},dde9:function(e,t,i){},e054:function(e,t,i){},e1fc:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"post-motion"},[i("h2",[e._v("Proposal:")]),i("div",{staticClass:"content"},[i("Tabs",{attrs:{animated:""},on:{click:e.onClickTab}},[i("Tab",{attrs:{title:"Major proposal"}},[i("div",{staticStyle:{margin:"5px 0 10px 18px"}},[i("h3",[e._v("Voting on major issues (MORE THAN HALF NUMBER WINS).")]),i("p",{staticStyle:{margin:"5px 0"}},[e._v(" 1. Formulate and amend the Basic Law, formulate rules for proposal,decision-making and supervision, etc. ")]),i("p",[e._v("2. Election of global representatives.")]),i("p",{staticStyle:{margin:"5px 0"}},[e._v(" 3. Formulation of specific content rules./p> ")]),i("p",[e._v("4. The vote option will be included.")])]),i("Field",{attrs:{rows:"1",autosize:"",label:"Proposal Name",type:"textarea",placeholder:"Please input the Proposal Name"},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}}),i("Field",{attrs:{rows:"1",autosize:"",label:"ERC20 Address",type:"textarea",placeholder:"Please input the ERC20"},model:{value:e.newErcAdd,callback:function(t){e.newErcAdd=t},expression:"newErcAdd"}}),i("Field",{attrs:{rows:"1",autosize:"",label:"Proposal Info",type:"textarea",placeholder:"Please input the proposal introduction, related links, and public welfare project contact person"},model:{value:e.newInfo,callback:function(t){e.newInfo=t},expression:"newInfo"}}),e._l(e.form.options,(function(t,n){return i("div",{key:n,staticClass:"optionBox"},[i("Field",{attrs:{rows:"1",autosize:"",label:"Option",type:"textarea",placeholder:"Please input the Proposal Option"},model:{value:t.option,callback:function(i){e.$set(t,"option",i)},expression:"item.option"}}),n>=0?i("span",{staticClass:"button-rounded button-small size",style:{marginRight:0==n?"3px":""},on:{click:e.addSearchOptions}},[i("i",{staticClass:"fa fa-plus-square size",staticStyle:{color:"#a5de37","font-size":"24px"}})]):e._e(),n>=1?i("span",{staticClass:"button-rounded button-small size",staticStyle:{"margin-right":"3px"},on:{click:function(t){return e.delSearchOptions(n)}}},[i("i",{staticClass:"fa fa-minus-square size",staticStyle:{color:"#ff4351","font-size":"24px"}})]):e._e()],1)})),i("Field",{attrs:{type:"number",label:"Valid Time",placeholder:"Please input the Valid Time"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),i("div",{staticClass:"btnbox"},[i("Button",{attrs:{type:"default"},on:{click:e.resetOptions}},[e._v(" Cancel ")]),i("Button",{attrs:{type:"info",disabled:e.disabled},on:{click:e.handlerPostMotion}},[e._v(" Confirm ")])],1)],2),i("Tab",{attrs:{title:"General Proposal"}},[i("div",{staticStyle:{margin:"5px 0 10px 18px"}},[i("h3",[e._v(" Voting on general proposal (the winner with the first number of votes). ")]),i("p",{staticStyle:{margin:"5px 0"}},[e._v(" 1. Charity to which you donate each month. ")]),i("p",[e._v("2. The Use of Treasury Fund (Celebrity Award).")]),i("p",{staticStyle:{margin:"5px 0"}},[e._v(" 3. Election of regional public opinion representatives (Regional representative: responsible for collecting and verifying humanitarian aid projects around the world) . ")]),i("p",[e._v("4. The vote option will be included.")])]),i("Field",{attrs:{rows:"1",autosize:"",label:"Proposal Name",type:"textarea",placeholder:"Please input the Proposal Name"},model:{value:e.newName,callback:function(t){e.newName=t},expression:"newName"}}),i("Field",{attrs:{rows:"1",autosize:"",label:"ERC20 Address",type:"textarea",placeholder:"Please input the ERC20"},model:{value:e.newErcAdd,callback:function(t){e.newErcAdd=t},expression:"newErcAdd"}}),i("Field",{attrs:{rows:"1",autosize:"",label:"Proposal Info",type:"textarea",placeholder:"Please input the proposal introduction, related links, and public welfare project contact person"},model:{value:e.newInfo,callback:function(t){e.newInfo=t},expression:"newInfo"}}),e._l(e.form.options,(function(t,n){return i("div",{key:n,staticClass:"optionBox"},[i("Field",{attrs:{rows:"1",autosize:"",label:"Option",type:"textarea",placeholder:"Please input the Proposal Option"},model:{value:t.option,callback:function(i){e.$set(t,"option",i)},expression:"item.option"}}),n>=0?i("span",{staticClass:"button-rounded button-small size",on:{click:e.addSearchOptions}},[i("i",{staticClass:"fa fa-plus-square size",staticStyle:{color:"#a5de37","font-size":"24px"}})]):e._e(),n>=1?i("span",{staticClass:"button-rounded button-small size",on:{click:function(t){return e.delSearchOptions(n)}}},[i("i",{staticClass:"fa fa-minus-square size",staticStyle:{color:"#ff4351","font-size":"24px"}})]):e._e()],1)})),i("Field",{attrs:{type:"number",label:"Valid Time",placeholder:"Please input the Valid Time"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),i("div",{staticClass:"btnbox"},[i("Button",{attrs:{type:"default"},on:{click:e.resetOptions}},[e._v(" Cancel ")]),i("Button",{attrs:{type:"info",disabled:e.disabled},on:{click:e.handlerPostMotion}},[e._v(" Confirm ")])],1)],2)],1)],1)])},o=[],a=i("1da1"),s=i("5530"),r=(i("bda7"),i("5e46")),l=(i("da3c"),i("0b33")),c=(i("66b9"),i("b650")),d=(i("4ddd"),i("9f14")),p=(i("a44c"),i("e27c")),u=(i("be7f"),i("565f")),h=(i("96cf"),i("b0c0"),i("a434"),i("2f62")),f=i("fa7d"),m=i("12b8"),b=(i("65e0"),i("99e5")),v=i("0329"),w={data:function(){return{disabled:!0,newName:"",newErcAdd:"",newInfo:"",form:{name:"",options:[{option:""}]},time:"",radio:1,motionListData:[],vote:this.$contractAddress.vote,iecConst:""}},components:{Field:u["a"],RadioGroup:p["a"],Radio:d["a"],Button:c["a"],Tab:l["a"],Tabs:r["a"]},computed:Object(s["a"])({},Object(h["c"])("login",["walletaccount"])),watch:{walletaccount:{handler:function(e){""!=e&&(this.disabled=!1)}},deep:!0,immediate:!0},activated:function(){this.disabled=!Object(f["c"])("walletaccount")},methods:{onClickTab:function(e,t){this.radio="Major proposal"==t?1:2,this.resetOptions()},handlerPostMotion:function(){this.time>30?this.$toast({message:"The valid time of a proposal can not exceed 30 days"}):this.time<1?this.$toast({message:"The valid time of a proposal can not be less than 1 day"}):(this.form.name=this.newName+"|"+this.newErcAdd+"|"+this.newInfo,this.writeMotion())},writeMotion:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var i,n,o,a,s,r,l,c,d,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.connectMetaMask(),Object(f["c"])("walletaccount")?e.web3=e.$web3js.getWeb3():e.web3=new b("https://mainnet.infura.io/v3/a1fb8b522ffc46d38c505a38cb073e73"),e.myaddress=Object(f["c"])("walletaccount"),e.iecConst=new e.web3.eth.Contract(v.abi,e.vote,{from:e.myaddress}),i=e.form.name=e.newName+"|"+e.newErcAdd+"|"+e.newInfo,n=e.time,o=1==e.radio,c="",1==e.form.options.length?(a=e.form.options[0].option,s="NO",r="NO",l="NO",c="Reject all options"):2==e.form.options.length?(a=e.form.options[0].option,s=e.form.options[1].option,r="NO",l="NO",c="Reject all options"):3==e.form.options.length?(a=e.form.options[0].option,s=e.form.options[1].option,r=e.form.options[2].option,l="NO",c="Reject all options"):4==e.form.options.length&&(a=e.form.options[0].option,s=e.form.options[1].option,r=e.form.options[2].option,l=e.form.options[3].option,c="Reject all options"),d=e,d.iecConst.methods.proposal(i,a,s,r,l,c,o,n).send().on("transactionHash",(function(e){d.hash=e,p=d.$toast({duration:0,message:"In transaction, please wait patiently"})})).on("receipt",(function(e){e.transactionHash==d.hash&&(p.close(),d.$toast({message:"提案成功"}),d.motionListData=[],d.resetOptions(),d.getvoteList())})).on("error",(function(e,t){p.close(),d.$toast({message:"Proposal failed, please try again later"})}));case 11:case"end":return t.stop()}}),t)})))()},addSearchOptions:function(){this.form.options.length<4?this.form.options.push({option:""}):this.$toast({message:"No more than four options of a proposal",type:"warning"})},delSearchOptions:function(e){this.form.options.splice(e,1)},resetOptions:function(){this.newName="",this.newErcAdd="",this.newInfo="";var e={name:"",options:[{option:""}]};this.form=JSON.parse(JSON.stringify(e))},connectMetaMask:function(){m["a"].connectMetaMask().then((function(e){Object(f["c"])("walletaccount")}))}}},g=w,k=(i("0dac"),i("2877")),x=Object(k["a"])(g,n,o,!1,null,"7ad1d8b6",null);t["default"]=x.exports},e27c:function(e,t,i){"use strict";var n=i("d282"),o=i("78eb"),a=i("9884"),s=Object(n["a"])("radio-group"),r=s[0],l=s[1];t["a"]=r({mixins:[Object(a["b"])("vanRadio"),o["a"]],props:{value:null,disabled:Boolean,direction:String,checkedColor:String,iconSize:[Number,String]},watch:{value:function(e){this.$emit("change",e)}},render:function(){var e=arguments[0];return e("div",{class:l([this.direction]),attrs:{role:"radiogroup"}},[this.slots()])}})}}]);
//# sourceMappingURL=postMotion.4ff08144.js.map